{"ast":null,"code":"var _jsxFileName = \"/home/botrott/Dev/kittygram_frontend/src/components/card-page/card-page.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { deleteCard, getCard } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/context\";\nimport returnIcon from \"../../images/left.svg\";\nimport editIcon from \"../../images/edit.svg\";\nimport defaultImg from \"../../images/default-kitty.jpg\";\nimport removeIcon from \"../../images/trash.svg\";\nimport { ButtonSecondary } from \"../ui/button-secondary/button-secondary\";\nimport { ButtonHeader } from \"../ui/button-header/button-header\";\nimport styles from \"./card-page.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CardPage = _ref => {\n  _s();\n\n  var _data$image;\n\n  let {\n    data,\n    setData,\n    extraClass = \"\"\n  } = _ref;\n  const [achievements, setAchievements] = React.useState(\"\");\n  const [user] = React.useContext(UserContext);\n  const history = useHistory();\n  const params = useParams();\n  React.useEffect(() => {\n    getCard(params.id).then(res => {\n      if (res && res.id) {\n        setData(res);\n        let resString = \"\";\n        res.achievements.forEach(item => {\n          resString ? resString += `, ${item.achievement_name}` : resString = item.achievement_name;\n        });\n        setAchievements(resString);\n      }\n    });\n  }, [params.id, setData]);\n\n  const handleReturn = () => {\n    setData({});\n    history.push(\"/\");\n  };\n\n  const handleRemoveCard = () => {\n    deleteCard(data.id).then(res => {\n      if (res.status) {\n        history.replace({\n          pathname: \"/\"\n        });\n      }\n    }).catch(err => {\n      console.log(err.message);\n    });\n  };\n\n  const colorText = data.color === \"black\" || data.color === \"saddlebrown\" || data.color === \"gray\" || data.color === \"darkgray\" ? \"white\" : \"primary\";\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: `${styles.content} ${extraClass}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.btns_box_mobile,\n        children: [/*#__PURE__*/_jsxDEV(ButtonSecondary, {\n          extraClass: styles.mobile_btn,\n          icon: returnIcon,\n          onClick: handleReturn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), data.owner && data.owner === user.id && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ButtonHeader, {\n            extraClass: `${styles.mobile_btn}`,\n            icon: editIcon,\n            to: \"/cats/edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ButtonSecondary, {\n            extraClass: styles.mobile_btn,\n            icon: removeIcon,\n            onClick: handleRemoveCard\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.img_box,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.img,\n          src: (_data$image = data.image) !== null && _data$image !== void 0 ? _data$image : defaultImg,\n          alt: \"\\u0424\\u043E\\u0442\\u043E \\u043A\\u043E\\u0442\\u0438\\u043A\\u0430.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonSecondary, {\n        extraClass: `${styles.desktop_btn} ${styles.desk_return}`,\n        icon: returnIcon,\n        onClick: handleReturn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), data.owner && data.owner === user.id && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ButtonHeader, {\n          extraClass: `${styles.desktop_btn} ${styles.desk_edit}`,\n          icon: editIcon,\n          to: \"/cats/edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonSecondary, {\n          extraClass: `${styles.desktop_btn} ${styles.desk_remove}`,\n          icon: removeIcon,\n          onClick: handleRemoveCard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text text_type_h2-5 text_color_primary mt-35 mb-10 ${styles.name}`,\n      children: data.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text text_type_h3 text_color_secondary ${styles.date}`,\n      children: data.birth_year\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.cat_color_box,\n      style: {\n        backgroundColor: data.color\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `text text_type_medium-20 text_color_${colorText} ${styles.cat_color}`,\n        children: data.color\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text text_type_h3 ${styles.achievements}`,\n      children: achievements\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CardPage, \"oE+8ZSEbnzh2d0Y0IS3tWDw0Sjc=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = CardPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardPage\");","map":{"version":3,"sources":["/home/botrott/Dev/kittygram_frontend/src/components/card-page/card-page.jsx"],"names":["React","useHistory","useParams","deleteCard","getCard","UserContext","returnIcon","editIcon","defaultImg","removeIcon","ButtonSecondary","ButtonHeader","styles","CardPage","data","setData","extraClass","achievements","setAchievements","useState","user","useContext","history","params","useEffect","id","then","res","resString","forEach","item","achievement_name","handleReturn","push","handleRemoveCard","status","replace","pathname","catch","err","console","log","message","colorText","color","content","container","btns_box_mobile","mobile_btn","owner","img_box","img","image","desktop_btn","desk_return","desk_edit","desk_remove","name","date","birth_year","cat_color_box","backgroundColor","cat_color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport { deleteCard, getCard } from \"../../utils/api\";\nimport { UserContext } from \"../../utils/context\";\n\nimport returnIcon from \"../../images/left.svg\";\nimport editIcon from \"../../images/edit.svg\";\nimport defaultImg from \"../../images/default-kitty.jpg\";\nimport removeIcon from \"../../images/trash.svg\";\n\nimport { ButtonSecondary } from \"../ui/button-secondary/button-secondary\";\nimport { ButtonHeader } from \"../ui/button-header/button-header\";\n\nimport styles from \"./card-page.module.css\";\n\nexport const CardPage = ({ data, setData, extraClass = \"\" }) => {\n  const [achievements, setAchievements] = React.useState(\"\");\n  const [user] = React.useContext(UserContext);\n\n  const history = useHistory();\n  const params = useParams();\n\n  React.useEffect(() => {\n    getCard(params.id).then((res) => {\n      if (res && res.id) {\n        setData(res);\n\n        let resString = \"\";\n        res.achievements.forEach((item) => {\n          resString\n            ? (resString += `, ${item.achievement_name}`)\n            : (resString = item.achievement_name);\n        });\n        setAchievements(resString);\n      }\n    });\n  }, [params.id, setData]);\n\n  const handleReturn = () => {\n    setData({});\n    history.push(\"/\");\n  };\n\n  const handleRemoveCard = () => {\n    deleteCard(data.id)\n      .then((res) => {\n        if (res.status) {\n          history.replace({ pathname: \"/\" });\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n\n  const colorText =\n    data.color === \"black\" ||\n    data.color === \"saddlebrown\" ||\n    data.color === \"gray\" ||\n    data.color === \"darkgray\"\n      ? \"white\"\n      : \"primary\";\n\n  return (\n    <article className={`${styles.content} ${extraClass}`}>\n      <div className={styles.container}>\n        <div className={styles.btns_box_mobile}>\n          <ButtonSecondary\n            extraClass={styles.mobile_btn}\n            icon={returnIcon}\n            onClick={handleReturn}\n          />\n          {data.owner && data.owner === user.id && (\n            <>\n              <ButtonHeader\n                extraClass={`${styles.mobile_btn}`}\n                icon={editIcon}\n                to=\"/cats/edit\"\n              />\n              <ButtonSecondary\n                extraClass={styles.mobile_btn}\n                icon={removeIcon}\n                onClick={handleRemoveCard}\n              />\n            </>\n          )}\n        </div>\n        <div className={styles.img_box}>\n          <img\n            className={styles.img}\n            src={data.image ?? defaultImg}\n            alt=\"Фото котика.\"\n          />\n        </div>\n        <ButtonSecondary\n          extraClass={`${styles.desktop_btn} ${styles.desk_return}`}\n          icon={returnIcon}\n          onClick={handleReturn}\n        />\n        {data.owner && data.owner === user.id && (\n          <>\n            <ButtonHeader\n              extraClass={`${styles.desktop_btn} ${styles.desk_edit}`}\n              icon={editIcon}\n              to=\"/cats/edit\"\n            />\n            <ButtonSecondary\n              extraClass={`${styles.desktop_btn} ${styles.desk_remove}`}\n              icon={removeIcon}\n              onClick={handleRemoveCard}\n            />\n          </>\n        )}\n      </div>\n      <p\n        className={`text text_type_h2-5 text_color_primary mt-35 mb-10 ${styles.name}`}\n      >\n        {data.name}\n      </p>\n      <p className={`text text_type_h3 text_color_secondary ${styles.date}`}>\n        {data.birth_year}\n      </p>\n      <div\n        className={styles.cat_color_box}\n        style={{ backgroundColor: data.color }}\n      >\n        <p\n          className={`text text_type_medium-20 text_color_${colorText} ${styles.cat_color}`}\n        >\n          {data.color}\n        </p>\n      </div>\n      <p className={`text text_type_h3 ${styles.achievements}`}>\n        {achievements}\n      </p>\n    </article>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}